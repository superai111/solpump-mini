<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Solpump Mini</title>
  <style>
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(180deg,#050b2e,#020617);color:#fff}
    .container{max-width:420px;margin:0 auto;padding:16px}
    .card{background:#0b143f;border-radius:14px;padding:16px;margin-bottom:16px}
    h1{margin:8px 0 16px 0}
    button{width:100%;padding:14px;border:none;border-radius:10px;font-size:16px;font-weight:bold;background:#1cff9a;color:#000}
    button.secondary{background:#1e293b;color:#fff}
    input{width:100%;padding:12px;border-radius:8px;border:none;margin:8px 0;font-size:15px}
    .center{text-align:center}
    .big{font-size:48px;font-weight:bold}
    .hidden{display:none}
    .history{display:flex;gap:8px;overflow-x:auto;margin-bottom:12px}
    .history span{background:#111c55;padding:6px 10px;border-radius:8px;white-space:nowrap;font-size:14px}
    .win{color:#19f7a5}
    .lose{color:#ff4d4d}
  </style>
</head>
<body>
<div class="container"><h1>üöÄ Solpump Mini</h1><!-- CONNECT --><div class="card">
  <button id="connectBtn">Connect Phantom Wallet</button>
  <div id="wallet" style="margin-top:8px"></div>
</div><!-- PREVIEW --><div class="card center">
  <div class="big" id="previewMultiplier">1.00x</div>
  <button class="secondary" onclick="enterGame()">ENTER GAME</button>
</div><!-- LEADERBOARD (VIEW ONLY) --><div class="card">
  <h3>üèÜ Weekly Leaderboard</h3>
  <div>Preview only</div>
</div><!-- STAT --><div class="card">
  <h3>üìä Statistics</h3>
  Total Prize Pool: <span id="pool">0</span> SOL
</div><!-- GAME --><div class="card hidden" id="game">  <!-- HISTORY HORIZONTAL -->  <div class="history" id="history"></div>  <!-- MULTIPLIER -->  <div class="center big" id="multiplier">1.00x</div>  <!-- BET + AUTO --><label>Bet Points</label> <input id="betInput" type="number" min="1" value="50" />

<label>Auto Cashout (x)</label> <input id="autoInput" type="number" step="0.01" min="1.01" value="2.00" />

<button onclick="startGame()">START</button> <button class="secondary" onclick="stopGame()">STOP</button>

  <p>Your Points: <span id="points">1000</span></p>  <hr />  <h4>Buy Points (In Game)</h4>
  <small>1 SOL = 1000 points | Min 0.01 SOL</small>
  <input id="buySol" placeholder="Enter SOL (ex: 0.05)" />
  <button onclick="buyPoints()">BUY POINTS</button></div></div><script>
let wallet=null;
let userPoints=1000;
let betPoints=0;
let autoCash=0;
let mult=1.0;
let timer=null;
let running=false;
let crashAt=0;
let history=[];

const connectBtn=document.getElementById('connectBtn');
const walletEl=document.getElementById('wallet');

connectBtn.onclick=async()=>{
  if(!window.solana||!window.solana.isPhantom){alert('Open this site inside Phantom browser');return;}
  const res=await window.solana.connect();
  wallet=res.publicKey.toString();
  walletEl.innerText='Wallet: '+wallet.slice(0,4)+'...'+wallet.slice(-4);
};

function enterGame(){
  document.getElementById('game').classList.remove('hidden');
}

function genCrash(){
  const r=Math.random();
  if(r<0.4) return rand(1.05,1.4);
  if(r<0.7) return rand(1.4,2.5);
  if(r<0.9) return rand(2.5,6);
  return rand(6,20);
}

function startGame(){
  if(running) return;
  betPoints=parseInt(document.getElementById('betInput').value);
  autoCash=parseFloat(document.getElementById('autoInput').value);
  if(betPoints<=0||betPoints>userPoints){alert('Not enough points');return;}

  // tr·ª´ ƒëi·ªÉm ngay khi b·∫Øt ƒë·∫ßu
  userPoints-=betPoints;
  updatePoints();

  mult=1.0;
  crashAt=genCrash();
  running=true;

  timer=setInterval(()=>{
    let speed=0.02+mult*0.004;
    if(Math.random()<0.1) speed*=3;
    mult+=speed;
    document.getElementById('multiplier').innerText=mult.toFixed(2)+'x';

    // auto cashout
    if(autoCash && mult>=autoCash){win();}

    // crash
    if(mult>=crashAt||Math.random()<0.005){lose();}
  },60);
}

function stopGame(){
  if(!running) return;
  win();
}

function win(){
  clearInterval(timer);
  running=false;
  const gain=Math.floor(betPoints*mult);
  userPoints+=gain;
  addHistory(mult,true);
  resetRound();
}

function lose(){
  clearInterval(timer);
  running=false;
  addHistory(mult,false);
  resetRound();
}

function resetRound(){
  mult=1.0;
  document.getElementById('multiplier').innerText='1.00x';
  updatePoints();
}

function updatePoints(){
  document.getElementById('points').innerText=userPoints;
}

function addHistory(x,win){
  history.unshift({x:x.toFixed(2),win});
  history=history.slice(0,12);
  const h=document.getElementById('history');
  h.innerHTML='';
  history.forEach(r=>{
    const s=document.createElement('span');
    s.className=r.win?'win':'lose';
    s.innerText=(r.win?'':'üí• ')+r.x+'x';
    h.appendChild(s);
  });
}

function buyPoints(){
  const sol=parseFloat(document.getElementById('buySol').value);
  if(isNaN(sol)||sol<0.01){alert('Min 0.01 SOL');return;}
  userPoints+=Math.floor(sol*1000);
  updatePoints();
  document.getElementById('buySol').value='';
}

function rand(a,b){return Math.random()*(b-a)+a}
</script></body>
</html>
