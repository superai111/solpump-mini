<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solpump Mini</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#050b1c;color:#fff}
.container{max-width:420px;margin:auto;padding:20px}
.card{background:#0b1229;border-radius:16px;padding:20px;margin-bottom:20px}
button{width:100%;padding:14px;border:none;border-radius:12px;background:#00ffa3;font-size:16px;font-weight:bold}
.hidden{display:none}
.multiplier{
  font-size:64px;
  text-align:center;
  font-weight:bold;
  margin:30px 0;
}
.controls button{margin-top:10px}
</style>
</head>

<body>
<div class="container">
<h1>ðŸš€ Solpump Mini</h1>

<!-- CONNECT -->
<div class="card" id="connect">
<button onclick="connect()">Connect Phantom Wallet</button>
<p id="wallet"></p>
<button id="enter" class="hidden" onclick="enterGame()">ENTER GAME</button>
</div>

<!-- GAME -->
<div class="card hidden" id="game">
<h3>CRASH</h3>

<div class="multiplier" id="multi">1.00x</div>

<div class="controls">
<button onclick="startGame()">START</button>
<button onclick="cashout()">STOP</button>
</div>

<p>Your Points: <span id="points">0</span></p>
</div>
</div>

<script>
let wallet=null;
let playing=false;
let multiplier=1;
let timer=null;
let points=0;

async function connect(){
  if(!window.solana?.isPhantom){
    alert("Open inside Phantom browser");
    return;
  }
  const res=await window.solana.connect();
  wallet=res.publicKey.toString();
  document.getElementById("wallet").innerText="Wallet: "+wallet.slice(0,4)+"..."+wallet.slice(-4);
  document.getElementById("enter").classList.remove("hidden");
}

function enterGame(){
  document.getElementById("connect").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
}

function startGame(){
  if(playing) return;
  playing=true;
  multiplier=1;
  document.getElementById("multi").innerText="1.00x";

  const crashAt=(Math.random()*4+1).toFixed(2);

  timer=setInterval(()=>{
    multiplier+=0.02;
    document.getElementById("multi").innerText=multiplier.toFixed(2)+"x";
    if(multiplier>=crashAt){
      stopGame(true);
    }
  },50);
}

function cashout(){
  if(!playing) return;
  stopGame(false);
}

function stopGame(crashed){
  clearInterval(timer);
  playing=false;
  if(!crashed){
    const earned=Math.floor(multiplier*10);
    points+=earned;
    document.getElementById("points").innerText=points;
  }else{
    document.getElementById("multi").innerText="ðŸ’¥ CRASH";
  }
}
</script>
</body>
</html>
